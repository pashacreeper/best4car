{% extends 'StoAdminBundle::layout.html.twig' %}
{% from 'MopaBootstrapBundle::flash.html.twig' import flash %}

{% block title %}{{ company.name }}{% endblock %}

{% block header %}<h4>{{ block('title') }}</h4>{% endblock %}

{% block content %}
<h4>Добавить изображение в галерею</h4>
<hr>
<form action="{{ path('company_save_image', {id: company.id}) }}" method="post" {{ form_enctype(form) }} class="form-horizontal">
    <div class="row-fluid">
        <div class="span6">
            {{ form_row(form.name) }}
        </div>
        <div class="span6">
            {{ form_row(form.visible) }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span6">
            {{ form_row(form.image) }}
        </div>
        <div class="span6">
            <img data-image="image" src="{{ asset('bundles/stocore/images/notimage.png') }}" class="img-rounded" style="height: 150px; margin-left:110px;">
        </div>

    </div>
    {{ form_widget(form) }}
    <div class="form-actions">
        <input type="submit" class="btn btn-primary" value="{{ 'form.create'|trans({}) }}" />
        <a href="{{ path('companies') }}" class="btn">{{ 'form.cancel'|trans({}) }}</a>
    </div>
</form>
{% if company.gallery|length %}
<ul class="thumbnails">
{% for photo in company.gallery %}
    <li class="span3">
        <div class="thumbnail">
            <center>
                <img title="{{ photo.name }}" alt="{{ photo.name }}" src="/../{{ storage_path }}/company/company_gallery/{{ photo.imageName }}" class="img-rounded" style="height: 150px;">
            </center>
            <div class="caption">
                <h5>{{ photo.name }}</h5>
                <p align="center">
{% if photo.visible %}
                    <i class="icon-eye-open" title="Visible"></i> Отображать
{% else %}
                    <i class="icon-eye-close" title="Unvisible"></i> Не отображать
{% endif %}
                </p>
                <div class="row-fluid">
                    <div class="span6">
                        <a href="{{ path('company_edit_image', { 'id': company.id, 'image_id':photo.id }) }}" class="btn btn-primary btn-block">Редактировать</a>
                    </div>
                    <div class="span6">
                        <a href="{{ path('company_delete_image', { 'id': company.id, 'image_id':photo.id }) }}" class="btn btn-danger btn-block">Удалить</a>
                    </div>
                </div>
            </div>
        </div>
    </li>
{% endfor %}
</ul>
{% else %}
    {{ flash(true, 'Изображения отсутствуют.', false, true) }}
{% endif %}
{% endblock %}

{% block foot_script %}
{{ parent() }}
<script type="text/javascript" src="{{ asset('bundles/stoadmin/js/script.js') }}"></script>
{% endblock %}

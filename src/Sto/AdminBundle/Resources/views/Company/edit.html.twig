{% extends 'StoAdminBundle::layout.html.twig' %}
{% from 'MopaBootstrapBundle::flash.html.twig' import flash %}

{% block title %}Редактирование компании{% endblock %}
{% block head_style %}
    {{ parent() }}
    <style>
    div.collection-item div.control-group div.controls {
        margin-left: 1px;
    }
    </style>

{% endblock %}
{% block header %}
<div class="row-fluid">
    <div class="span6">
        <h4>{{ block('title') }}</h4>
    </div>
    <div class="span6">
        <div class="pull-right">
            <ul class="nav nav-pills">
                <li class="active"><a id="a_tab1" href="#tab1" data-toggle="tab">Общая информация</a></li>
                <li><a id="a_tab2" href="#tab2" data-toggle="tab">Дополнительно</a></li>
                <li><a id="a_tab3" href="#tab3" data-toggle="tab">Галерея</a></li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<form action="{{ path('company_update', { 'id': company.id }) }}" method="post" {{ form_enctype(edit_form) }} class="form-horizontal">
    <div class="tab-content" style="overflow: inherit;">
        <div class="tab-pane active" id="tab1">
            <div class="row-fluid">
                <div class="span6">
                    {{ form_row(edit_form.name) }}
                    {{ form_row(edit_form.phones) }}
                    {{ form_row(edit_form.address) }}
                    {{ form_row(edit_form.workingTime) }}
                </div>
                <div class="span6">
                    <div class="controls">
{% if company.logoName and not form_errors(edit_form.logo) %}
                        <img data-image="logo" src="/../{{ storage_path }}/company_logo/{{ company.logoName }}" width="120" class="img-circle"/>
{% else %}
                        <img  data-image="logo" src="{{ asset('bundles/stocore/images/notimage.png') }}" style="width:120px" class="img-circle"/>
{% endif %}
                    </div>
                    {{ form_row(edit_form.logo, {'label_render': false}) }}
                </div>
            </div>
            <div class="row-fluid">
                <div class="span6">
                    {#{ form_row(edit_form.hourPrice) }#}
                    <div class="control-group">
                        {{ form_label(edit_form.hourPrice) }}
                        <div class="controls">
                            {{ form_widget(edit_form.hourPrice) }}  {{ form_widget(edit_form.currency) }}
                        </div>
                    </div>

                    {{ form_row(edit_form.services) }}
                    {{ form_row(edit_form.visible) }}
                </div>
                <div class="span6">
                    {{ form_row(edit_form.rating) }}
                    {{ form_row(edit_form.specialization) }}
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    {{ form_row(edit_form.fullName) }}
                    {{ form_row(edit_form.slogan) }}
                </div>
            </div>
        </div>
        <div class="tab-pane" id="tab2">
            <div class="row-fluid">
                <div class="span6">
                    {{ form_row(edit_form.web) }}
                    {{ form_row(edit_form.email) }}
                    {{ form_row(edit_form.skype) }}
                    {{ form_row(edit_form.createtDate) }}
                </div>
                <div class="span6">
                    {{ form_row(edit_form.socialNetworks) }}
                </div>
            </div>
            <div class="row-fluid">
                <div class="span6">
                    {{ form_row(edit_form.gps) }}
                    {{ form_row(edit_form.managers) }}
                    {{ form_row(edit_form.subscribable) }}
                </div>
                <div class="span6">
                    {{ form_row(edit_form.reviews) }}
                    {{ form_row(edit_form.additionalServices) }}
                </div>
            </div>
            <div class="row-fluid">
                {{ form_row(edit_form.administratorContactInfo) }}
                {{ form_row(edit_form.notes) }}
                {{ form_row(edit_form.description) }}
            </div>
        </div>
    </div>
    {{ form_widget(edit_form) }}
    <div class="form-actions">
        <input type="submit" class="btn btn-primary" value="{{ 'form.save'|trans({}) }}" />
        <a href="{{ path('companies') }}" class="btn">{{ 'form.cancel'|trans({}) }}</a>
    </div>
</form>
{% endblock %}

{% block foot_script %}
{{ parent() }}
{% javascripts
    'bundles/stocore/js/select2.js'
    'bundles/stocore/js/bootstrap-inputmask.js'
    'bundles/stoadmin/js/script.js'
%}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
<script type="text/javascript" >
    $(".select2").select2({});
</script>
{% endblock %}

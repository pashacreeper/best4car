{% extends 'StoContentBundle::layout.html.twig' %}

{% block map %}
<div id="map">
    <div class="popupCardCompany">
        <div class="popupCardCompanyTop">
            <img src="/img/logocompany.png" alt="" />
            <div class="dataCompany">
                <p class="nameCompany"><a href="company.html">Транспорт Сервис</a></p>
                <p class="adressCompany">Новочеркасский пр-д. 17</p>
                <span class="spesialTerms">Спецпредложение!</span>
            </div>
            <p class="indexCardCompany">
                <span class="indexbg"></span>
                <span class="indexLevel">9.2</span></br>
            </p>
        </div>
        <div class="popupCardCompanyCont">
            <div class="servicesPart">
                <ul class="services">
                    <li class="servisesItem">
                        <span class="iconProfilCompany wash"></span>Мойка
                    </li>
                    <li class="servisesItem">
                        <span class="iconProfilCompany showroom"></span>Автосалон
                    </li>
                    <li class="servisesItem">
                        <span class="iconProfilCompany cto"></span>СТО
                    </li>
                </ul>
                <ul class="servicesAdd">
                    <li class="servisesAddItem">
                        <span class="iconAddProfil wash">
                    </li>
                    <li class="servisesAddItem">
                        <span class="iconAddProfil wash">
                    </li>
                    <li class="servisesAddItem">
                        <span class="iconAddProfil wash">
                    </li>
                    <li class="servisesAddItem">
                        <span class="iconAddProfil wash">
                    </li>
                </ul>
            </div>
            <div class="infoCompany">
                <p class="infoCompanyLable">
                    Контактный телефон:</br><span>(812) 323-78-98</span>
                </p>
                <p class="infoCompanyLable">
                    Часы работы:</br><span>9:00 - 21:00 (пн-пт)</span></br><span>9:00 - 20:00 (сб-вс)</span>
                </p>
                <p class="infoCompanyLable">
                    Сайт:</br><span><a href="#">www.rolf-carline.ru</a></span>
                </p>                                
            </div>
        </div>
        <svg id="myCanvas" width="20px" height="16px">
            <polyline style="stroke-linejoin: miter; stroke: #9e9a94; stroke-width: 2; fill: #fff;" points="0 0, 10 7, 20 0"/>
        </svg>
    </div>
</div>
{% endblock %}

{% block contentTop %}
<div class="contentTop">
    <div class="contentTopLeft">
        <div class="btnShoeLeftCont">
            <div class="hideLeftColumn">
                <a href="#" class="hideBtn" id="toggleCompaniesList">Показать списком</a>
            </div>
        </div> 
        <div class="selectLeftColumn">
            <div class="assortSelect">
                <span>Сортировать по:</span>
                <div class="parametrAssort">
                    <div class="lineForm">
                        <select class="styled1">
                            <option value="">рейтингу</option>
                            <option value="">уровню цен</option>
                            <option value="">удаленности</option>
                        </select>    
                    </div>
                </div>
            </div>
        </div>
    </div>              
    <div id="1"class="contentTopRight">
        <span class="showRightSearch">
            Скрыть расширенный поиск
        </span>
        <span class="hideRightSearch">
            Показать расширенный поиск
        </span>
    </div>
    <p class="contentTopCenter">
        Все <span>150 </span>компаний вашего города
    </p>
</div>

<div id="companiesList" class="contentLeft">
    <div class="scroll-pane jspScrollable" id="companiesListContainer">
    </div>
</div>
<script>
$(document).ready(function(){
    var doAjax = function() {
        var aURL = null;
        var aData = null;
        var initialized = false;
        if (!$('#home_search').hasClass('hide')){
            aURL = Routing.generate('api_auto_get_companies_with_filter', { "responce-type" : "html"});
            $('[data-serarch-form="responce-type"]').val("html");
            aData = $('#advanced-search-form').serialize();
            $('[data-serarch-form="responce-type"]').val("json");
        } else {
            // aURL = Routing.generate('company_ajax_get_all');
            aURL = Routing.generate('api_auto_get_companies_with_filter', { "responce-type" : "html"});
        }
        $.ajax({
            type: 'GET',
            url: aURL,
            data: aData,
            success: function(html) {
                var root = $('#companiesListContainer');
                root.empty();
                root.append(html);
                root.jScrollPane();
            },
            error: function(jqxhr, textStatus, errorThrown) {
                console.log(textStatus + ": " + errorThrown);
            }
        });
    };

    // Показ компаний списком
    $("#companiesList").hide();
    $('#toggleCompaniesList').on("click", function(){
        var $this = $(this),
            defaultText = 'Показать списком',
            closeText = 'Скрыть',
            companiesList = $('#companiesList');

        $this.parent().toggleClass('showLeftColumn');
        doAjax();
        companiesList.toggle();
        if (companiesList.is(':hidden')) {
            $this.html(defaultText);
            $('#map').css('left', '0');
        } else {
            $this.html(closeText);
            $('#map').css('left', '380px');
        }
    });
});
</script>

<div id="block_1" class="contentRightWrap">
    <div class="contentRight">
        <form action method="post" class="inputTypeForm">
            <p class="contentRightItem">
                <label for="typeCompany">Тип компании</label>
            </p>                        
            <div class="basket__cont__body__bottom__paper">
                <div class="lineForm">
                    <select class="styled" id="typeCompany">
                        <option value="">Автосервис</option>
                        <option value="">Автомойка</option>
                        <option value="">Шиномонтаж</option>
                    </select>                                       
                </div>                      
            </div>
            <p class="contentRightItem">
                <label for="addtypeCompany">Подтип компании</label>
            </p>                        
            <div class="basket__cont__body__bottom__paper">
                <div class="lineForm">
                    <select class="styled" id="addtypeCompany">
                        <option value="">Лицензионные</option>
                        <option value="">Не лицензионные</option>
                        <option value="">Шиномонтаж</option>
                    </select>                                       
                </div>                      
            </div>  
            <p class="contentRightItem">
                <label for="inputBrandField">Специализация на марке</label>
            </p>
            <input type="text" id="inputBrandField" />                  
            <div class="reitingSlyder">
                <p class="contentAmount">
                    <span id="lableAmount" for="amount">Минимальный рейтинг:</span>
                    <input type="text" id="amount" />
                </p>
                <div id="slider-range-max"></div>
                <span class="indexSlyderLeft">1</span>
                <span class="indexSlyderRight">10</span>
            </div>
            <p class="contentRightItem">
                <label>Время работы</label>
            </p>                        
            <ul class="btnFiltr-group">                              
                <li><input id="CheckBox1" class="checkBox" type="checkbox"/><label class="btnFiltr btnFiltrFirst" for="CheckBox1">24 часа</label></li>
                <li><input id="CheckBox2" class="checkBox" type="checkbox"/><label class="btnFiltr" for="CheckBox2">До поздна</label></li>
                <li><input id="CheckBox3" class="checkBox" type="checkbox"/><label class="btnFiltr btnFiltrLast" for="CheckBox3">Выходные</label></li>
            </ul>
            <p class="contentRightItem">
                <label>Дополнительные услуги</label>
            </p>                        
            <ul class="btnFiltr-group dop">                              
                <li>
                    <input id="CheckBox4" class="checkBox" type="checkbox"/>
                    <label class="btnFiltr btnFiltrFirst" for="CheckBox4">
                        <i class="iconDopWork iconevacuation"></i>
                    </label>
                </li>
                <li>
                    <input id="CheckBox5" class="checkBox" type="checkbox"/>
                    <label class="btnFiltr" for="CheckBox5">
                        <i class="iconDopWork iconwifi"></i>
                    </label>
                </li>
                <li>
                    <input id="CheckBox6" class="checkBox" type="checkbox"/>
                    <label class="btnFiltr" for="CheckBox6">
                        <i class="iconDopWork iconotdyh"></i>
                    </label>
                </li>
                <li>
                    <input id="CheckBox7" class="checkBox" type="checkbox"/>
                    <label class="btnFiltr" for="CheckBox7">
                        <i class="iconDopWork iconkofe"></i>
                    </label>
                </li>
                <li>
                    <input id="CheckBox8" class="checkBox" type="checkbox"/>
                    <label class="btnFiltr" for="CheckBox8">
                        <i class="iconDopWork iconcard"></i>
                    </label>
                </li>
                <li>
                    <input id="CheckBox9" class="checkBox" type="checkbox"/>
                    <label class="btnFiltr btnFiltrLast" for="CheckBox9">
                        <i class="iconDopWork iconcafe"></i>
                    </label>
                </li>
            </ul>
            <p class="contentRightItem labelCheckBox">
                <span class="checkBox__autograf__wrap">
                    <input id="checkBox__autograf1" type="checkbox" value="off">
                    Только с акциями
                </span>
                <script type="text/javascript">
                    jQuery(document).ready(function(){
                        jQuery(".checkBox__autograf__wrap").mousedown(
                                                function() {
                                                     changeCheck(jQuery(this));                                              
                                                });
                                                jQuery(".checkBox__autograf__wrap").each(
                                                function() {                                                 
                                                     changeCheckStart(jQuery(this));                                                 
                                                });
                                                                                        });
                                                function changeCheck(el)
                                                {
                                                     var el = el,
                                                          input = el.find("input").eq(0);
                                                     if(!input.attr("checked")) {
                                                        el.css("background-position","0 -24px");    
                                                        input.attr("checked", true)
                                                    } else {
                                                        el.css("background-position","0 0");    
                                                        input.attr("checked", false)
                                                    }
                                                     return true;
                                                }
                                                function changeCheckStart(el)
                                                {
                                                var el = el,
                                                        input = el.find("input").eq(0);
                                                      if(input.attr("checked")) {
                                                        el.css("background-position","0 -24px");    
                                                        }
                                                     return true;
                                                }
                </script>   
            </p>
            <p class="cleanSearch secondaryLink" id="cleanSearch">Очистить поиск</p>
        </form>                         
    </div>
</div>
{% endblock %}